<span class="hljs-variable">unit</span><span class="hljs-symbol">$_</span> <span class="hljs-operator">=</span> <span class="hljs-type">Unit</span>;
<span class="hljs-variable">true</span><span class="hljs-symbol">$_</span> <span class="hljs-operator">=</span> <span class="hljs-type">True</span>;
<span class="hljs-comment">// EMPTY False;</span>
<span class="hljs-variable">bool_false</span><span class="hljs-symbol">$0</span> <span class="hljs-operator">=</span> <span class="hljs-type">Bool</span>;
<span class="hljs-variable">bool_true</span><span class="hljs-symbol">$1</span> <span class="hljs-operator">=</span> <span class="hljs-type">Bool</span>;
<span class="hljs-variable">bool_false</span><span class="hljs-symbol">$0</span> <span class="hljs-operator">=</span> <span class="hljs-type">BoolFalse</span>;
<span class="hljs-variable">bool_true</span><span class="hljs-symbol">$1</span> <span class="hljs-operator">=</span> <span class="hljs-type">BoolTrue</span>;
<span class="hljs-variable">nothing</span><span class="hljs-symbol">$0</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">X</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Type</span><span class="hljs-punctuation">}</span> <span class="hljs-operator">=</span> <span class="hljs-type">Maybe</span> <span class="hljs-variable">X</span><span class="hljs-punctuation">;</span>
<span class="hljs-variable">just</span><span class="hljs-symbol">$1</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">X</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Type</span><span class="hljs-punctuation">}</span> <span class="hljs-variable">value</span><span class="hljs-punctuation">:</span><span class="hljs-variable">X</span> <span class="hljs-operator">=</span> <span class="hljs-type">Maybe</span> <span class="hljs-variable">X</span><span class="hljs-punctuation">;</span>
<span class="hljs-variable">left</span><span class="hljs-symbol">$0</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">X</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Type</span><span class="hljs-punctuation">}</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">Y</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Type</span><span class="hljs-punctuation">}</span> <span class="hljs-variable">value</span><span class="hljs-punctuation">:</span><span class="hljs-variable">X</span> <span class="hljs-operator">=</span> <span class="hljs-type">Either</span> <span class="hljs-variable">X</span> <span class="hljs-variable">Y</span><span class="hljs-punctuation">;</span>
<span class="hljs-variable">right</span><span class="hljs-symbol">$1</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">X</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Type</span><span class="hljs-punctuation">}</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">Y</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Type</span><span class="hljs-punctuation">}</span> <span class="hljs-variable">value</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Y</span> <span class="hljs-operator">=</span> <span class="hljs-type">Either</span> <span class="hljs-variable">X</span> <span class="hljs-variable">Y</span><span class="hljs-punctuation">;</span>
<span class="hljs-variable">pair</span><span class="hljs-symbol">$_</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">X</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Type</span><span class="hljs-punctuation">}</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">Y</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Type</span><span class="hljs-punctuation">}</span> <span class="hljs-variable">first</span><span class="hljs-punctuation">:</span><span class="hljs-variable">X</span> <span class="hljs-variable">second</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Y</span> <span class="hljs-operator">=</span> <span class="hljs-type">Both</span> <span class="hljs-variable">X</span> <span class="hljs-variable">Y</span><span class="hljs-punctuation">;</span>

<span class="hljs-variable">_</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">n</span><span class="hljs-punctuation">:</span><span class="hljs-symbol">#</span><span class="hljs-punctuation">}</span> <span class="hljs-variable">_</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">(</span><span class="hljs-variable">Hashmap</span> <span class="hljs-variable">n</span> <span class="hljs-variable">True</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span> <span class="hljs-type">BitstringSet</span> <span class="hljs-variable">n</span><span class="hljs-punctuation">;</span>

<span class="hljs-variable">unary_zero</span><span class="hljs-symbol">$0</span> <span class="hljs-operator">=</span> <span class="hljs-type">Unary</span> <span class="hljs-operator">~</span><span class="hljs-number">0</span><span class="hljs-punctuation">;</span>
<span class="hljs-variable">unary_succ</span><span class="hljs-symbol">$1</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">n</span><span class="hljs-punctuation">:</span><span class="hljs-symbol">#</span><span class="hljs-punctuation">}</span> <span class="hljs-variable">x</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">(</span><span class="hljs-variable">Unary</span> <span class="hljs-operator">~</span><span class="hljs-variable">n</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span> <span class="hljs-type">Unary</span> <span class="hljs-operator">~</span><span class="hljs-punctuation">(</span><span class="hljs-variable">n</span> <span class="hljs-operator">+</span> <span class="hljs-number">1</span><span class="hljs-punctuation">)</span><span class="hljs-punctuation">;</span>

<span class="hljs-variable">hme_empty</span><span class="hljs-symbol">$0</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">n</span><span class="hljs-punctuation">:</span><span class="hljs-symbol">#</span><span class="hljs-punctuation">}</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">X</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Type</span><span class="hljs-punctuation">}</span> <span class="hljs-operator">=</span> <span class="hljs-type">HashmapE</span> <span class="hljs-variable">n</span> <span class="hljs-variable">X</span><span class="hljs-punctuation">;</span>
<span class="hljs-variable">hme_root</span><span class="hljs-symbol">$1</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">n</span><span class="hljs-punctuation">:</span><span class="hljs-symbol">#</span><span class="hljs-punctuation">}</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">X</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Type</span><span class="hljs-punctuation">}</span> <span class="hljs-variable">root</span><span class="hljs-punctuation">:</span><span class="hljs-operator">^</span><span class="hljs-punctuation">(</span><span class="hljs-variable">Hashmap</span> <span class="hljs-variable">n</span> <span class="hljs-variable">X</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span> <span class="hljs-type">HashmapE</span> <span class="hljs-variable">n</span> <span class="hljs-variable">X</span><span class="hljs-punctuation">;</span>

<span class="hljs-comment">//  HashmapAug, hashmap with an extra value</span>
<span class="hljs-comment">//   (augmentation) of type Y at every node</span>
<span class="hljs-comment">//</span>
<span class="hljs-variable">ahm_edge</span><span class="hljs-symbol">#_</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">n</span><span class="hljs-punctuation">:</span><span class="hljs-symbol">#</span><span class="hljs-punctuation">}</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">X</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Type</span><span class="hljs-punctuation">}</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">Y</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Type</span><span class="hljs-punctuation">}</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">l</span><span class="hljs-punctuation">:</span><span class="hljs-symbol">#</span><span class="hljs-punctuation">}</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">m</span><span class="hljs-punctuation">:</span><span class="hljs-symbol">#</span><span class="hljs-punctuation">}</span>
  <span class="hljs-variable">label</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">(</span><span class="hljs-variable">HmLabel</span> <span class="hljs-operator">~</span><span class="hljs-variable">l</span> <span class="hljs-variable">n</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">n</span> <span class="hljs-operator">=</span> <span class="hljs-punctuation">(</span><span class="hljs-operator">~</span><span class="hljs-variable">m</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">+</span> <span class="hljs-variable">l</span><span class="hljs-punctuation">}</span>
  <span class="hljs-variable">node</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">(</span><span class="hljs-variable">HashmapAugNode</span> <span class="hljs-variable">m</span> <span class="hljs-variable">X</span> <span class="hljs-variable">Y</span><span class="hljs-punctuation">)</span> <span class="hljs-operator">=</span> <span class="hljs-type">HashmapAug</span> <span class="hljs-variable">n</span> <span class="hljs-variable">X</span> <span class="hljs-variable">Y</span><span class="hljs-punctuation">;</span>
<span class="hljs-variable">ahmn_leaf</span><span class="hljs-symbol">#_</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">X</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Type</span><span class="hljs-punctuation">}</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">Y</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Type</span><span class="hljs-punctuation">}</span> <span class="hljs-variable">extra</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Y</span> <span class="hljs-variable">value</span><span class="hljs-punctuation">:</span><span class="hljs-variable">X</span> <span class="hljs-operator">=</span> <span class="hljs-type">HashmapAugNode</span> <span class="hljs-number">0</span> <span class="hljs-variable">X</span> <span class="hljs-variable">Y</span><span class="hljs-punctuation">;</span>
<span class="hljs-variable">ahmn_fork</span><span class="hljs-symbol">#_</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">n</span><span class="hljs-punctuation">:</span><span class="hljs-symbol">#</span><span class="hljs-punctuation">}</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">X</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Type</span><span class="hljs-punctuation">}</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">Y</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Type</span><span class="hljs-punctuation">}</span> <span class="hljs-variable">left</span><span class="hljs-punctuation">:</span><span class="hljs-operator">^</span><span class="hljs-punctuation">(</span><span class="hljs-variable">HashmapAug</span> <span class="hljs-variable">n</span> <span class="hljs-variable">X</span> <span class="hljs-variable">Y</span><span class="hljs-punctuation">)</span>
  <span class="hljs-variable">right</span><span class="hljs-punctuation">:</span><span class="hljs-operator">^</span><span class="hljs-punctuation">(</span><span class="hljs-variable">HashmapAug</span> <span class="hljs-variable">n</span> <span class="hljs-variable">X</span> <span class="hljs-variable">Y</span><span class="hljs-punctuation">)</span> <span class="hljs-variable">extra</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Y</span> <span class="hljs-operator">=</span> <span class="hljs-type">HashmapAugNode</span> <span class="hljs-punctuation">(</span><span class="hljs-variable">n</span> <span class="hljs-operator">+</span> <span class="hljs-number">1</span><span class="hljs-punctuation">)</span> <span class="hljs-variable">X</span> <span class="hljs-variable">Y</span><span class="hljs-punctuation">;</span>

<span class="hljs-variable">ahme_empty</span><span class="hljs-symbol">$0</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">n</span><span class="hljs-punctuation">:</span><span class="hljs-symbol">#</span><span class="hljs-punctuation">}</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">X</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Type</span><span class="hljs-punctuation">}</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">Y</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Type</span><span class="hljs-punctuation">}</span> <span class="hljs-variable">extra</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Y</span>
          <span class="hljs-operator">=</span> <span class="hljs-type">HashmapAugE</span> <span class="hljs-variable">n</span> <span class="hljs-variable">X</span> <span class="hljs-variable">Y</span><span class="hljs-punctuation">;</span>
<span class="hljs-variable">ahme_root</span><span class="hljs-symbol">$1</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">n</span><span class="hljs-punctuation">:</span><span class="hljs-symbol">#</span><span class="hljs-punctuation">}</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">X</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Type</span><span class="hljs-punctuation">}</span> <span class="hljs-punctuation">{</span><span class="hljs-variable">Y</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Type</span><span class="hljs-punctuation">}</span> <span class="hljs-variable">root</span><span class="hljs-punctuation">:</span><span class="hljs-operator">^</span><span class="hljs-punctuation">(</span><span class="hljs-variable">HashmapAug</span> <span class="hljs-variable">n</span> <span class="hljs-variable">X</span> <span class="hljs-variable">Y</span><span class="hljs-punctuation">)</span>
  <span class="hljs-variable">extra</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Y</span> <span class="hljs-operator">=</span> <span class="hljs-type">HashmapAugE</span> <span class="hljs-variable">n</span> <span class="hljs-variable">X</span> <span class="hljs-variable">Y</span><span class="hljs-punctuation">;</span>

<span class="hljs-variable">acst_unchanged</span><span class="hljs-symbol">$0</span> <span class="hljs-operator">=</span> <span class="hljs-type">AccStatusChange</span>;  <span class="hljs-comment">// x -&gt; x</span>
<span class="hljs-variable">acst_frozen</span><span class="hljs-symbol">$10</span> <span class="hljs-operator">=</span> <span class="hljs-type">AccStatusChange</span>;    <span class="hljs-comment">// init -&gt; frozen</span>
<span class="hljs-variable">acst_deleted</span><span class="hljs-symbol">$11</span> <span class="hljs-operator">=</span> <span class="hljs-type">AccStatusChange</span>;   <span class="hljs-comment">// frozen -&gt; deleted</span>

<span class="hljs-variable">shard_descr</span><span class="hljs-symbol">#b</span> <span class="hljs-variable">seq_no</span><span class="hljs-punctuation">:</span><span class="hljs-variable">uint32</span> <span class="hljs-variable">reg_mc_seqno</span><span class="hljs-punctuation">:</span><span class="hljs-variable">uint32</span>
  <span class="hljs-variable">start_lt</span><span class="hljs-punctuation">:</span><span class="hljs-variable">uint64</span> <span class="hljs-variable">end_lt</span><span class="hljs-punctuation">:</span><span class="hljs-variable">uint64</span>
  <span class="hljs-variable">root_hash</span><span class="hljs-punctuation">:</span><span class="hljs-variable">bits256</span> <span class="hljs-variable">file_hash</span><span class="hljs-punctuation">:</span><span class="hljs-variable">bits256</span>
  <span class="hljs-variable">before_split</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Bool</span> <span class="hljs-variable">before_merge</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Bool</span>
  <span class="hljs-variable">want_split</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Bool</span> <span class="hljs-variable">want_merge</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Bool</span>
  <span class="hljs-variable">nx_cc_updated</span><span class="hljs-punctuation">:</span><span class="hljs-variable">Bool</span> <span class="hljs-variable">flags</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">(</span><span class="hljs-symbol">#</span><span class="hljs-symbol">#</span> <span class="hljs-number">3</span><span class="hljs-punctuation">)</span> <span class="hljs-punctuation">{</span> <span class="hljs-variable">flags</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span> <span class="hljs-punctuation">}</span>
  <span class="hljs-variable">next_catchain_seqno</span><span class="hljs-punctuation">:</span><span class="hljs-variable">uint32</span> <span class="hljs-variable">next_validator_shard</span><span class="hljs-punctuation">:</span><span class="hljs-variable">uint64</span>
  <span class="hljs-variable">min_ref_mc_seqno</span><span class="hljs-punctuation">:</span><span class="hljs-variable">uint32</span> <span class="hljs-variable">gen_utime</span><span class="hljs-punctuation">:</span><span class="hljs-variable">uint32</span>
  <span class="hljs-variable">split_merge_at</span><span class="hljs-punctuation">:</span><span class="hljs-variable">FutureSplitMerge</span>
  <span class="hljs-variable">fees_collected</span><span class="hljs-punctuation">:</span><span class="hljs-variable">CurrencyCollection</span>
  <span class="hljs-variable">funds_created</span><span class="hljs-punctuation">:</span><span class="hljs-variable">CurrencyCollection</span> <span class="hljs-operator">=</span> <span class="hljs-type">ShardDescr</span>;
